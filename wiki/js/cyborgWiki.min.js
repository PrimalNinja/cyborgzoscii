// CyborgWiki v20250708
// (c) 2025 Cyborg Unicorn Pty Ltd.
// This software is released under MIT License.

/*jsl:ignore*/

function cyborgWikiToHtml(c,f,e,b){var g=[],h=0,a=c.replace(/<code>([\s\S]*?)<\/code>/gi,function(a,b){var c="~CODE_"+h+"~";g.push(b);h++;return c});if(b)for(c=0;c<b.length;c++)var d=b[c],k=RegExp(d.placeholder.toUpperCase(),"g"),a=a.replace(k,d.value);a=a.replace(/\r/g,"");a=a.replace(/====(.*?)====/g,'<span class="gscw-subsubheading">$1</span>');a=a.replace(/===(.*?)===/g,'<span class="gscw-subsubheading">$1</span>');a=a.replace(/==(.*?)==/g,'<span class="gscw-subheading">$1</span>');a=a.replace(/=(.*?)=/g,
'<span class="gscw-heading">$1</span>');a=a.replace(/'''(.*?)'''/g,'<span class="gscw-bold">$1</span>');a=a.replace(/- - - -/g,'<hr class="gscw-hr">');a=a.replace(/\[\[Image:(.*?)\|(.*?)\]\]/g,'<img class="gscw-image" src="'+e+'$1" alt="$2"/>');a=a.replace(/\[Image:(.*?)\|(.*?)\]/g,'<img class="gscw-image" src="$1" alt="$2"/>');a=a.replace(/\[\[(.*?)\|(.*?)\]\]/g,'<a class="gscw-internallink gecw-internallink" href="'+f+'$1&title=$2">$2</a>');a=a.replace(/\[(http[s]?:\/\/(.*?))\|(.*?)\]/g,'<a class="gscw-link" href="$1" target="_blank">$3</a>');
a=a.replace(/\{\|\s*/g,'<table class="gscw-table"><tr>');a=a.replace(/\|-\s*/g,"</tr><tr>");a=a.replace(/\!\!/g,"</th><th>");a=a.replace(/\! /g,"<th>");a=a.replace(/\|\}\s*/g,"</tr></table>");a=a.replace(/\|\|/g,"</td><td>");a=a.replace(/\| /g,"<td>");f=a.split("\n");e=[];b="";a=null;for(c=0;c<f.length;c++)d=f[c],d.match(/^\*/)?("ul"!==a&&(a&&e.push(b+("ol"===a?"</ol>":"</ul>")),b='<ul class="gscw-list">',a="ul"),b+="<li>"+d.replace(/^\*/,"").trim()+"</li>"):d.match(/^#/)?("ol"!==a&&(a&&e.push(b+
("ol"===a?"</ol>":"</ul>")),b='<ol class="gscw-list">',a="ol"),b+="<li>"+d.replace(/^#/,"").trim()+"</li>"):(a&&(e.push(b+("ol"===a?"</ol>":"</ul>")),a=null,b=""),d.match(/<(h[1-3]|span|a|img).*?>/),e.push(d));a&&e.push(b+("ol"===a?"</ol>":"</ul>"));a=e.join("<br>");for(c=0;c<g.length;c++)f=g[c].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=a.replace("~CODE_"+c+"~",'<pre class="gscw-code">'+f+"</pre>");return a};
