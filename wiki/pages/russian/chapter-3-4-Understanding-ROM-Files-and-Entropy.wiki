== Часть D – Понимание ROM файлов и энтропии ==

Дело Гарольда становится еще более интересным, когда мы рассматриваем качество ROM. Следователи предположили, что высококачественные "ядерные коды" потребуют сложных ключей кодирования. На самом деле Гарольд использовал JPEG-фото своей бабушки в качестве своего ROM — и это обеспечивало астрономическую безопасность для кодирования его рецепта в бинарные данные.

=== Основы энтропии ROM ===

Хороший ZOSCII ROM должен содержать разнообразные байтовые значения (0-255) с множественными вхождениями каждого значения, которое вы хотите закодировать. Фото бабушки Гарольда (64KB JPEG) содержало:

*Байтовое значение 65 ('A' в ASCII): 847 вхождений на разных позициях
*Байтовое значение 32 (пробел): более 1,200 вхождений
*Байтовое значение 255: 234 вхождения
*Байтовое значение 0: 445 вхождений
*Все 256 возможных байтовых значений представлены

Это разнообразие дало рецепту печенья Гарольда (преобразованному в бинарный формат) примерно 10^156 возможных кодировок — что делает его более безопасным, чем системы шифрования военного уровня.

=== Тестирование качества ROM ===

Вы можете оценить пригодность любого файла в качестве ZOSCII ROM, используя этот комплексный тест:

<code>
function testROM(romData) {
    let counts = new Array(256).fill(0);
    for(let i = 0; i < romData.length; i++) {
        counts[romData[i]]++;
    }
    
    // Проверка охвата всех возможных байтовых значений
    let coveredBytes = 0;
    let totalOccurrences = 0;
    let minCount = Infinity;
    let maxCount = 0;
    
    for(let i = 0; i < 256; i++) {
        if(counts[i] > 0) {
            coveredBytes++;
            totalOccurrences += counts[i];
            minCount = Math.min(minCount, counts[i]);
            maxCount = Math.max(maxCount, counts[i]);
        }
    }
    
    api.print(`ROM охватывает ${coveredBytes}/256 возможных байтовых значений`);
    api.print(`Среднее количество вхождений на байтовое значение: ${Math.round(totalOccurrences/coveredBytes)}`);
    api.print(`Диапазон: от ${minCount} до ${maxCount} вхождений на байт`);
}
</code>

Фото бабушки Гарольда получило 256/256 байтового покрытия со средним количеством 256 вхождений на байтовое значение — что объясняет, почему его бинарно закодированный рецепт печенья достиг ядерных оценок безопасности.

=== Кодирование бинарных данных ===

ZOSCII может кодировать любой тип данных:

*Текстовые файлы (преобразованные в байты UTF-8)
*Изображения (сырые данные пикселей)
*Аудиофайлы (данные звуковых волн)
*Исполняемые файлы (машинный код)
*Документы (PDF, Word и т.д.)
*Любой бинарный формат файла

Гарольд мог закодировать свой рецепт как документ Word, изображение рукописного рецепта или даже аудиозапись — все с тем же астрономическим уровнем безопасности.